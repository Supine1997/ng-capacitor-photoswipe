{"version":3,"file":"ng-capacitor-photoswipe.js","sources":["../../projects/ng-capacitor-photoswipe/src/lib/template.ts","../../projects/ng-capacitor-photoswipe/src/lib/index.ts","../../projects/ng-capacitor-photoswipe/src/lib/service.ts","../../projects/ng-capacitor-photoswipe/src/lib/directive.ts","../../projects/ng-capacitor-photoswipe/src/lib/module.ts","../../projects/ng-capacitor-photoswipe/src/public-api.ts","../../projects/ng-capacitor-photoswipe/src/ng-capacitor-photoswipe.ts"],"sourcesContent":["export default `\n<div class=\"pswp\" tabindex=\"-1\" role=\"dialog\" aria-hidden=\"true\">\n    <div class=\"pswp__bg\"></div>\n    <div class=\"pswp__scroll-wrap\">\n        <div class=\"pswp__container\">\n            <div class=\"pswp__item\"></div>\n            <div class=\"pswp__item\"></div>\n            <div class=\"pswp__item\"></div>\n        </div>\n        <div class=\"pswp__ui pswp__ui--hidden\">\n            <div class=\"pswp__top-bar\" style=\"height: auto;padding-top: var(--ion-safe-area-top);\">\n                <div class=\"pswp__counter\" style=\"margin-top: var(--ion-safe-area-top);\"></div>\n                <button class=\"pswp__button pswp__button--close\" title=\"关闭\"></button>\n                <div class=\"pswp__preloader\">\n                    <div class=\"pswp__preloader__icn\">\n                        <div class=\"pswp__preloader__cut\">\n                            <div class=\"pswp__preloader__donut\"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"pswp__share-modal pswp__share-modal--hidden pswp__single-tap\">\n                <div class=\"pswp__share-tooltip\"></div>\n            </div>\n            <button class=\"pswp__button pswp__button--arrow--left\" title=\"上一张\">\n            </button>\n            <button class=\"pswp__button pswp__button--arrow--right\" title=\"下一张\">\n            </button>\n            <div class=\"pswp__caption\">\n                <div class=\"pswp__caption__center\"></div>\n            </div>\n        </div>\n    </div>\n</div>\n`;\n","import * as PhotoSwipe from 'photoswipe';\nimport * as PhotoSwipeUI_Default from 'photoswipe/dist/photoswipe-ui-default';\nimport {PhotoSwipeItem} from './interface';\nimport template from './template';\n\nexport default class NgCapacitorPhotoswipe {\n    private viewDomId = '__media-previewer';\n    viewDom: HTMLElement; // 视图Dom <div id=\"__media-previewer\"><div class=\"pswp\">...</div></div>\n\n    constructor() {\n        this.viewDom = this.generateViewDom();\n    }\n\n    /**\n     * 构建Dom\n     */\n    private generateViewDom(): HTMLElement {\n        let viewDom = document.getElementById(this.viewDomId);\n        if (viewDom) {\n            return viewDom;\n        }\n        viewDom = document.createElement('div');\n        viewDom.classList.add('copy-unable');\n        viewDom.id = this.viewDomId;\n        viewDom.innerHTML = template; // 插入dom模板\n        document.body.appendChild(viewDom);\n        return viewDom;\n    }\n\n    /**\n     * 构建配置\n     * @return 默认配置\n     */\n    private generateOptions(): any {\n        return {\n            loop: false, // 是否循环显示\n        };\n    }\n\n    /**\n     * 从imgElements对象中获取items\n     * @param imgElements imgElements\n     */\n    private getItemsFromElements(imgElements: HTMLImageElement[]): PhotoSwipeItem[] {\n        const items = [];\n        for (const el of imgElements) {\n            items.push({\n                el,\n                src: el.src,\n                w: el.naturalWidth,\n                h: el.naturalHeight,\n            });\n        }\n        return items;\n    }\n\n    /**\n     * 从图片链接开始显示\n     * @param defaultIndex 开始image的索引\n     * @param urls 图片链接数组\n     */\n    async start(defaultIndex: number, urls: string[]): Promise<void> {\n        const options = this.generateOptions();\n        options.index = defaultIndex; // 默认索引\n\n        const gallery = new PhotoSwipe(\n            this.viewDom.querySelector('.pswp'),\n            PhotoSwipeUI_Default,\n            urls.map(url => new Object({src: url, w: 0, h: 0})),\n            options,\n        );\n\n        /* 自动更新图片尺寸 @reference https://github.com/luoyang125024608/vue-photoswipe-mobile/blob/master/src/previewer.vue */\n        gallery.listen('gettingData', (index, item) => {\n            if (!item.w || !item.h) {\n                const img = new Image();\n                img.onload = () => {\n                    item.w = img.width;\n                    item.h = img.height;\n                    gallery.updateSize(true);\n                };\n                img.src = item.src;\n            }\n        });\n\n        return new Promise(resolve => {\n            gallery.listen('close', resolve);\n            gallery.init();\n        });\n    }\n\n    /**\n     * 从image element对象开始显示\n     * @param defaultIndex 开始image的索引\n     * @param imgElements 同一组的image element对象数组\n     */\n    async startWithElements(defaultIndex: number, imgElements: HTMLImageElement[]): Promise<void> {\n        const items = await this.getItemsFromElements(imgElements);\n\n        const options = this.generateOptions();\n        options.index = defaultIndex;\n        options.showHideOpacity = true;\n        options.history = false;\n        options.shareEl = false;\n        options.getThumbBoundsFn = i => {\n            const thumbnail = items[i].el;\n            const pageYScroll = window.pageYOffset || document.documentElement.scrollTop;\n            const rect = thumbnail.getBoundingClientRect();\n            return {\n                x: rect.left,\n                y: rect.top + pageYScroll,\n                w: rect.width\n            };\n        };\n        options.addCaptionHTMLFn = (item, captionEl, isFake) => {\n            if (!item.title) {\n                captionEl.children[0].innerText = '';\n                return false;\n            }\n            captionEl.children[0].innerHTML = item.title;\n            return true;\n        };\n        options.getDoubleTapZoom = (isMouseClick, item) => {\n            if (isMouseClick) {\n                return 1.5;\n            } else {\n                return item.initialZoomLevel < 0.7 ? 1 : 1.5;\n            }\n        };\n\n        const gallery = new PhotoSwipe(\n            this.viewDom.querySelector('.pswp'),\n            PhotoSwipeUI_Default,\n            items,\n            options,\n        );\n\n        // see: http://photoswipe.com/documentation/responsive-images.html\n        let realViewportWidth: number;\n        let useLargeImages = false;\n        let firstResize = true;\n        let imageSrcWillChange: boolean;\n\n        gallery.listen('beforeResize', () => {\n            let dpiRatio = window.devicePixelRatio ? window.devicePixelRatio : 1;\n            dpiRatio = Math.min(dpiRatio, 2.5);\n            realViewportWidth = gallery.viewportSize.x * dpiRatio;\n            if (realViewportWidth >= 1200 || (!gallery.likelyTouchDevice && realViewportWidth > 800) || screen.width > 1200) {\n                if (!useLargeImages) {\n                    useLargeImages = true;\n                    imageSrcWillChange = true;\n                }\n            } else {\n                if (useLargeImages) {\n                    useLargeImages = false;\n                    imageSrcWillChange = true;\n                }\n            }\n\n            if (imageSrcWillChange && !firstResize) {\n                gallery.invalidateCurrItems();\n            }\n\n            if (firstResize) {\n                firstResize = false;\n            }\n            imageSrcWillChange = false;\n        });\n\n        return new Promise(resolve => {\n            gallery.listen('close', resolve);\n            gallery.init();\n        });\n    }\n}\n","import {Injectable} from '@angular/core';\nimport CapacitorPhotoswipe from './index';\nimport {Capacitor, Plugins} from '@capacitor/core';\nimport {Platform} from '@ionic/angular';\nimport {Subscription} from 'rxjs';\n\nconst {StatusBar} = Plugins;\n\n@Injectable()\nexport class NgCapacitorPhotoswipeService {\n\n    constructor(\n        private platform: Platform,\n    ) {\n    }\n\n    /**\n     * 从图片链接开始显示\n     * @param defaultIndex 开始image的索引\n     * @param urls // 图片链接数组\n     */\n    async show(defaultIndex: number, urls: string[]): Promise<void> {\n        const backButtonDefaultController = new BackButtonDefaultController(this.platform);\n        backButtonDefaultController.disable();\n        await new CapacitorPhotoswipe().start(defaultIndex, urls);\n        backButtonDefaultController.enable();\n    }\n\n    /**\n     * 显示单张图片\n     * @param src 图片地址\n     */\n    async singleShow(src: string): Promise<void> {\n        return this.show(0, [src]);\n    }\n\n    /**\n     * 通过Element显示\n     * @param defaultIndex 默认索引\n     * @param elements ImageElement数组\n     */\n    async showFromElements(defaultIndex: number, elements: HTMLImageElement[]): Promise<void> {\n        const backButtonDefaultController = new BackButtonDefaultController(this.platform);\n        backButtonDefaultController.disable();\n        await new CapacitorPhotoswipe().startWithElements(defaultIndex, elements);\n        backButtonDefaultController.enable();\n    }\n\n    /**\n     * 通过单个Element显示\n     * @param element 目标 ImageElement\n     */\n    async showFromElement(element: HTMLImageElement): Promise<void> {\n        await this.showFromElements(0, [element]);\n    }\n}\n\n/**\n * Android返回按键默认事件控制器\n */\nclass BackButtonDefaultController {\n    subscription: Subscription;\n\n    constructor(\n        private platform: Platform,\n    ) {\n    }\n\n    disable(): void {\n        if (Capacitor.isNative) {\n            StatusBar.hide();\n            if (Capacitor.platform === 'android') {\n                // 接管默认返回键路由返回事件\n                this.subscription = this.platform.backButton.subscribeWithPriority(0, () => null);\n            }\n        }\n    }\n\n    enable(): void {\n        if (Capacitor.isNative) {\n            StatusBar.show();\n            // 释放默认返回键监听\n            this.subscription?.unsubscribe();\n        }\n    }\n}\n","import {Directive, ElementRef, HostListener} from '@angular/core';\nimport {NgCapacitorPhotoswipeService} from './service';\n\n@Directive({\n    selector: 'img[libPhotoswipe]',\n})\nexport class NgCapacitorPhotoswipeDirective {\n    constructor(\n        private el: ElementRef,\n        private capacitorPhotoswipeService: NgCapacitorPhotoswipeService,\n    ) {\n    }\n\n    @HostListener('click', ['$event'])\n    async onClick(ev): Promise<void> {\n        ev.stopPropagation(); // 停止事件冒泡\n        // attr上的值\n        const attrValue = this.el.nativeElement.getAttribute('libPhotoswipe');\n        if (attrValue) { // 如果存在值，则表示为群组显示\n            const imagesNodeArray = document.body.querySelectorAll(`img[libPhotoswipe=${attrValue}]:not(.pswp__img)`);\n            const index = this.getNodeIndexFromList(this.el.nativeElement, imagesNodeArray);\n            await this.capacitorPhotoswipeService.showFromElements(index, imagesNodeArray as any);\n        } else {\n            await this.capacitorPhotoswipeService.showFromElement(this.el.nativeElement);\n        }\n    }\n\n    /**\n     * 获取一个node在nodeList中的索引\n     * @param node 目标node\n     * @param nodeList 目标nodeList\n     */\n    private getNodeIndexFromList(node: Element, nodeList: NodeList): number {\n        for (let i = 0; i < nodeList.length; i++) {\n            if (nodeList[i] === node) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {NgCapacitorPhotoswipeDirective} from './directive';\nimport {NgCapacitorPhotoswipeService} from './service';\n\n@NgModule({\n    declarations: [\n        NgCapacitorPhotoswipeDirective,\n    ],\n    exports: [\n        NgCapacitorPhotoswipeDirective,\n    ],\n})\nexport class NgCapacitorPhotoswipeModule {\n\n    static forRoot(): ModuleWithProviders<NgCapacitorPhotoswipeModule> {\n        return {\n            ngModule: NgCapacitorPhotoswipeModule,\n            providers: [\n                NgCapacitorPhotoswipeService,\n            ],\n        };\n    }\n}\n","/*\n * Public API Surface of ng-capacitor-photoswipe\n */\nexport * from './lib/module';\nexport * from './lib/service';\nexport * from './lib/directive';\nexport * from './lib/interface';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["CapacitorPhotoswipe"],"mappings":";;;;;;;AAAA,eAAe;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAkCd;;MC7BoB,qBAAqB;IAItC;QAHQ,cAAS,GAAG,mBAAmB,CAAC;QAIpC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;KACzC;;;;IAKO,eAAe;QACnB,IAAI,OAAO,GAAG,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;QACtD,IAAI,OAAO,EAAE;YACT,OAAO,OAAO,CAAC;SAClB;QACD,OAAO,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACxC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QACrC,OAAO,CAAC,EAAE,GAAG,IAAI,CAAC,SAAS,CAAC;QAC5B,OAAO,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC7B,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;QACnC,OAAO,OAAO,CAAC;KAClB;;;;;IAMO,eAAe;QACnB,OAAO;YACH,IAAI,EAAE,KAAK;SACd,CAAC;KACL;;;;;IAMO,oBAAoB,CAAC,WAA+B;QACxD,MAAM,KAAK,GAAG,EAAE,CAAC;QACjB,KAAK,MAAM,EAAE,IAAI,WAAW,EAAE;YAC1B,KAAK,CAAC,IAAI,CAAC;gBACP,EAAE;gBACF,GAAG,EAAE,EAAE,CAAC,GAAG;gBACX,CAAC,EAAE,EAAE,CAAC,YAAY;gBAClB,CAAC,EAAE,EAAE,CAAC,aAAa;aACtB,CAAC,CAAC;SACN;QACD,OAAO,KAAK,CAAC;KAChB;;;;;;IAOK,KAAK,CAAC,YAAoB,EAAE,IAAc;;YAC5C,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACvC,OAAO,CAAC,KAAK,GAAG,YAAY,CAAC;YAE7B,MAAM,OAAO,GAAG,IAAI,UAAU,CAC1B,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,EACnC,oBAAoB,EACpB,IAAI,CAAC,GAAG,CAAC,GAAG,IAAI,IAAI,MAAM,CAAC,EAAC,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAC,CAAC,CAAC,EACnD,OAAO,CACV,CAAC;;YAGF,OAAO,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,KAAK,EAAE,IAAI;gBACtC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE;oBACpB,MAAM,GAAG,GAAG,IAAI,KAAK,EAAE,CAAC;oBACxB,GAAG,CAAC,MAAM,GAAG;wBACT,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC;wBACnB,IAAI,CAAC,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC;wBACpB,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;qBAC5B,CAAC;oBACF,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;iBACtB;aACJ,CAAC,CAAC;YAEH,OAAO,IAAI,OAAO,CAAC,OAAO;gBACtB,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACjC,OAAO,CAAC,IAAI,EAAE,CAAC;aAClB,CAAC,CAAC;SACN;KAAA;;;;;;IAOK,iBAAiB,CAAC,YAAoB,EAAE,WAA+B;;YACzE,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAC;YAE3D,MAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;YACvC,OAAO,CAAC,KAAK,GAAG,YAAY,CAAC;YAC7B,OAAO,CAAC,eAAe,GAAG,IAAI,CAAC;YAC/B,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC;YACxB,OAAO,CAAC,OAAO,GAAG,KAAK,CAAC;YACxB,OAAO,CAAC,gBAAgB,GAAG,CAAC;gBACxB,MAAM,SAAS,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;gBAC9B,MAAM,WAAW,GAAG,MAAM,CAAC,WAAW,IAAI,QAAQ,CAAC,eAAe,CAAC,SAAS,CAAC;gBAC7E,MAAM,IAAI,GAAG,SAAS,CAAC,qBAAqB,EAAE,CAAC;gBAC/C,OAAO;oBACH,CAAC,EAAE,IAAI,CAAC,IAAI;oBACZ,CAAC,EAAE,IAAI,CAAC,GAAG,GAAG,WAAW;oBACzB,CAAC,EAAE,IAAI,CAAC,KAAK;iBAChB,CAAC;aACL,CAAC;YACF,OAAO,CAAC,gBAAgB,GAAG,CAAC,IAAI,EAAE,SAAS,EAAE,MAAM;gBAC/C,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;oBACb,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,EAAE,CAAC;oBACrC,OAAO,KAAK,CAAC;iBAChB;gBACD,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC;gBAC7C,OAAO,IAAI,CAAC;aACf,CAAC;YACF,OAAO,CAAC,gBAAgB,GAAG,CAAC,YAAY,EAAE,IAAI;gBAC1C,IAAI,YAAY,EAAE;oBACd,OAAO,GAAG,CAAC;iBACd;qBAAM;oBACH,OAAO,IAAI,CAAC,gBAAgB,GAAG,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;iBAChD;aACJ,CAAC;YAEF,MAAM,OAAO,GAAG,IAAI,UAAU,CAC1B,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,EACnC,oBAAoB,EACpB,KAAK,EACL,OAAO,CACV,CAAC;;YAGF,IAAI,iBAAyB,CAAC;YAC9B,IAAI,cAAc,GAAG,KAAK,CAAC;YAC3B,IAAI,WAAW,GAAG,IAAI,CAAC;YACvB,IAAI,kBAA2B,CAAC;YAEhC,OAAO,CAAC,MAAM,CAAC,cAAc,EAAE;gBAC3B,IAAI,QAAQ,GAAG,MAAM,CAAC,gBAAgB,GAAG,MAAM,CAAC,gBAAgB,GAAG,CAAC,CAAC;gBACrE,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC;gBACnC,iBAAiB,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,QAAQ,CAAC;gBACtD,IAAI,iBAAiB,IAAI,IAAI,KAAK,CAAC,OAAO,CAAC,iBAAiB,IAAI,iBAAiB,GAAG,GAAG,CAAC,IAAI,MAAM,CAAC,KAAK,GAAG,IAAI,EAAE;oBAC7G,IAAI,CAAC,cAAc,EAAE;wBACjB,cAAc,GAAG,IAAI,CAAC;wBACtB,kBAAkB,GAAG,IAAI,CAAC;qBAC7B;iBACJ;qBAAM;oBACH,IAAI,cAAc,EAAE;wBAChB,cAAc,GAAG,KAAK,CAAC;wBACvB,kBAAkB,GAAG,IAAI,CAAC;qBAC7B;iBACJ;gBAED,IAAI,kBAAkB,IAAI,CAAC,WAAW,EAAE;oBACpC,OAAO,CAAC,mBAAmB,EAAE,CAAC;iBACjC;gBAED,IAAI,WAAW,EAAE;oBACb,WAAW,GAAG,KAAK,CAAC;iBACvB;gBACD,kBAAkB,GAAG,KAAK,CAAC;aAC9B,CAAC,CAAC;YAEH,OAAO,IAAI,OAAO,CAAC,OAAO;gBACtB,OAAO,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;gBACjC,OAAO,CAAC,IAAI,EAAE,CAAC;aAClB,CAAC,CAAC;SACN;KAAA;;;ACvKL,MAAM,EAAC,SAAS,EAAC,GAAG,OAAO,CAAC;MAGf,4BAA4B;IAErC,YACY,QAAkB;QAAlB,aAAQ,GAAR,QAAQ,CAAU;KAE7B;;;;;;IAOK,IAAI,CAAC,YAAoB,EAAE,IAAc;;YAC3C,MAAM,2BAA2B,GAAG,IAAI,2BAA2B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACnF,2BAA2B,CAAC,OAAO,EAAE,CAAC;YACtC,MAAM,IAAIA,qBAAmB,EAAE,CAAC,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;YAC1D,2BAA2B,CAAC,MAAM,EAAE,CAAC;SACxC;KAAA;;;;;IAMK,UAAU,CAAC,GAAW;;YACxB,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;SAC9B;KAAA;;;;;;IAOK,gBAAgB,CAAC,YAAoB,EAAE,QAA4B;;YACrE,MAAM,2BAA2B,GAAG,IAAI,2BAA2B,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;YACnF,2BAA2B,CAAC,OAAO,EAAE,CAAC;YACtC,MAAM,IAAIA,qBAAmB,EAAE,CAAC,iBAAiB,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAC;YAC1E,2BAA2B,CAAC,MAAM,EAAE,CAAC;SACxC;KAAA;;;;;IAMK,eAAe,CAAC,OAAyB;;YAC3C,MAAM,IAAI,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;SAC7C;KAAA;;;YA9CJ,UAAU;;;YALH,QAAQ;;AAsDhB;;;AAGA,MAAM,2BAA2B;IAG7B,YACY,QAAkB;QAAlB,aAAQ,GAAR,QAAQ,CAAU;KAE7B;IAED,OAAO;QACH,IAAI,SAAS,CAAC,QAAQ,EAAE;YACpB,SAAS,CAAC,IAAI,EAAE,CAAC;YACjB,IAAI,SAAS,CAAC,QAAQ,KAAK,SAAS,EAAE;;gBAElC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,qBAAqB,CAAC,CAAC,EAAE,MAAM,IAAI,CAAC,CAAC;aACrF;SACJ;KACJ;IAED,MAAM;;QACF,IAAI,SAAS,CAAC,QAAQ,EAAE;YACpB,SAAS,CAAC,IAAI,EAAE,CAAC;;YAEjB,MAAA,IAAI,CAAC,YAAY,0CAAE,WAAW,GAAG;SACpC;KACJ;;;MC9EQ,8BAA8B;IACvC,YACY,EAAc,EACd,0BAAwD;QADxD,OAAE,GAAF,EAAE,CAAY;QACd,+BAA0B,GAA1B,0BAA0B,CAA8B;KAEnE;IAGK,OAAO,CAAC,EAAE;;YACZ,EAAE,CAAC,eAAe,EAAE,CAAC;;YAErB,MAAM,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,YAAY,CAAC,eAAe,CAAC,CAAC;YACtE,IAAI,SAAS,EAAE;gBACX,MAAM,eAAe,GAAG,QAAQ,CAAC,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,SAAS,mBAAmB,CAAC,CAAC;gBAC1G,MAAM,KAAK,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC;gBAChF,MAAM,IAAI,CAAC,0BAA0B,CAAC,gBAAgB,CAAC,KAAK,EAAE,eAAsB,CAAC,CAAC;aACzF;iBAAM;gBACH,MAAM,IAAI,CAAC,0BAA0B,CAAC,eAAe,CAAC,IAAI,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC;aAChF;SACJ;KAAA;;;;;;IAOO,oBAAoB,CAAC,IAAa,EAAE,QAAkB;QAC1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACtC,IAAI,QAAQ,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;gBACtB,OAAO,CAAC,CAAC;aACZ;SACJ;QACD,OAAO,CAAC,CAAC,CAAC;KACb;;;YApCJ,SAAS,SAAC;gBACP,QAAQ,EAAE,oBAAoB;aACjC;;;YALkB,UAAU;YACrB,4BAA4B;;;sBAY/B,YAAY,SAAC,OAAO,EAAE,CAAC,QAAQ,CAAC;;;MCDxB,2BAA2B;IAEpC,OAAO,OAAO;QACV,OAAO;YACH,QAAQ,EAAE,2BAA2B;YACrC,SAAS,EAAE;gBACP,4BAA4B;aAC/B;SACJ,CAAC;KACL;;;YAjBJ,QAAQ,SAAC;gBACN,YAAY,EAAE;oBACV,8BAA8B;iBACjC;gBACD,OAAO,EAAE;oBACL,8BAA8B;iBACjC;aACJ;;;ACXD;;;;ACAA;;;;;;"}